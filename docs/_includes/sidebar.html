{% assign items = site.data.sidebar.home.items %}

<div class="menu">
    <ul id="sidebar" class="sidebar"></ul>
</div>


<script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>

<script>
    var sidebarItems = [
  {
    "title":"Leetcode",
    "url":"www.leetcode.com",
    "subs":["Leetcode A", "Leetcode B", "Leetcode C"]
    
  },
  {
    "title":"Codepen",
    "url":"codepen.io",
    "subs":["Codepen A", "Codepen B", "Codepen C"]
  },
  {
    "title":"OMSCS",
    "url":"https://omscs.gatech.edu/",
    "subs":["OMSCS A", "OMSCS B", "OMSCS C"]
  },
  {
    "title":"Reading",
    "url":"www.goodreads.com",
    "subs":["Reading A", "Reading B"]
  }
]

class Sidebar extends
  React.Component {
    constructor() {
      super();
      this.state = {
        items: {},
        show: false,
        subs: [],
        
      };
      this.show = this.show.bind(this);
    }
    componentWillMount()  {
      this.setState({
        items:sidebarItems, 
        show: false,
        subs: [],
      });
    }
    show(subs) {
      if (this.state.show)  {
        this.setState({ show: false })
      }
      else  {
        this.setState({ show: true, subs: subs })
      }
    };
  
    render()  {
      return (
        <ul>
        { this.state.items.map((item, index) => (
          <li>
              <a onClick={() => this.show(item.subs)} class="menu-btn">
                {item.title}
                <span class="fas fa-caret-down"></span>
                  
              </a>
                {(this.state.show && item.subs === this.state.subs) ? (
                <ul class="submenu">
                  { this.state.subs.map((sub, index) => (
                    <li>
                      <a>{ sub }</a>
                        
                    </li>
                  ))}
                </ul>) : (  null  )
               }
          </li>
    ))}
    </ul>);
    } 
  }

ReactDOM.render(
  <Sidebar data={sidebarItems} />,
  document.getElementById('menu')
);
</script>